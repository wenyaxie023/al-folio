document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("about-like-section"),e=document.getElementById("about-like-button"),n=document.getElementById("about-like-count");if(!t||!e||!n)return;const o=e.querySelector(".about-like-button__icon"),a=e.querySelector(".about-like-button__label"),i="wenyaxie023_github_io",c="about_like",l="about-like-liked",r="https://api.countapi.xyz";let u=!1;const s=t=>{const e="number"==typeof t&&Number.isFinite(t)?t:0;n.textContent=` ${e} liked`},d=t=>{u=t,e.classList.toggle("liked",t),e.disabled=t,e.setAttribute("aria-pressed",t?"true":"false"),a&&(a.textContent=t?"liked":"like"),o&&(o.textContent=t?"\ud83d\udc96":"\ud83d\udc4d")},f=()=>{if("function"!=typeof window.confetti)return;const t=1200,e=Date.now()+t,n=["#f472b6","#38bdf8","#facc15","#4ade80","#a78bfa"];!function t(){window.confetti({particleCount:40,spread:65,startVelocity:35,gravity:.9,scalar:.9,ticks:90,origin:{x:.6*Math.random()+.2,y:.2*Math.random()+.1},colors:n}),Date.now()<e&&requestAnimationFrame(t)}()},b=async()=>{try{await fetch(`${r}/create?namespace=${i}&key=${c}&value=0`)}catch(t){}try{const t=await fetch(`${r}/get/${i}/${c}`);if(!t.ok)throw new Error("Failed to fetch like count");const e=await t.json();s(e.value)}catch(t){n.textContent="fail"}},y=async()=>{try{const t=await fetch(`${r}/hit/${i}/${c}`);if(!t.ok)throw new Error("Failed to increment like count");const e=await t.json();s(e.value),d(!0);try{localStorage.setItem(l,"true")}catch(t){}f()}catch(t){d(!1),n.textContent="fail"}};let k=null;try{k=localStorage.getItem(l)}catch(t){}d("true"===k),b(),e.addEventListener("click",(()=>{u||(e.disabled=!0,y())}))}));