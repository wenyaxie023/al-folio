document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("about-like-section"),e=document.getElementById("about-like-button"),n=document.getElementById("about-like-count");if(!t||!e||!n)return;const o=e.querySelector(".about-like-button__icon"),a=e.querySelector(".about-like-button__label"),c="wenyaxie023_github_io",i="about_like",r="about-like-liked",l="https://api.countapi.xyz";let u=!1;const s=t=>{const e="number"==typeof t&&Number.isFinite(t)?t:0;n.textContent=`\u5df2\u6709 ${e} \u4eba\u70b9\u8d5e`},d=t=>{u=t,e.classList.toggle("liked",t),e.disabled=t,e.setAttribute("aria-pressed",t?"true":"false"),a&&(a.textContent=t?"\u5df2\u70b9\u8d5e":"\u4e3a\u6211\u70b9\u8d5e"),o&&(o.textContent=t?"\ud83d\udc96":"\ud83d\udc4d")},b=()=>{if("function"!=typeof window.confetti)return;const t=1200,e=Date.now()+t,n=["#f472b6","#38bdf8","#facc15","#4ade80","#a78bfa"];!function t(){window.confetti({particleCount:40,spread:65,startVelocity:35,gravity:.9,scalar:.9,ticks:90,origin:{x:.6*Math.random()+.2,y:.2*Math.random()+.1},colors:n}),Date.now()<e&&requestAnimationFrame(t)}()},f=async()=>{try{await fetch(`${l}/create?namespace=${c}&key=${i}&value=0`)}catch(t){}try{const t=await fetch(`${l}/get/${c}/${i}`);if(!t.ok)throw new Error("Failed to fetch like count");const e=await t.json();s(e.value)}catch(t){n.textContent="\u70b9\u8d5e\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528"}},y=async()=>{try{const t=await fetch(`${l}/hit/${c}/${i}`);if(!t.ok)throw new Error("Failed to increment like count");const e=await t.json();s(e.value),d(!0);try{localStorage.setItem(r,"true")}catch(t){}b()}catch(t){d(!1),n.textContent="\u70b9\u8d5e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"}};let m=null;try{m=localStorage.getItem(r)}catch(t){}d("true"===m),f(),e.addEventListener("click",(()=>{u||(e.disabled=!0,y())}))}));